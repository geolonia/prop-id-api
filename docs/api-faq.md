<style>
h2 {
  margin-top: 30px;
  margin-bottom: 10px;
}
h2:before {
  content: 'Q.';
  margin-right: .5em;
}
p, aside {
  margin-left: 30px;
}
aside {
  background: #333;
  padding: 1em;
}
aside:before {
  content: '補足';
  font-weight: bold;
}

h2 + p:before {
  content: 'A.';
  margin-right: .5em;
}

</style>

# 不動産共通IDについてのよくある質問

## 住所変更にはどのように対応していますか？　新築、取り壊しの場合のID変更はいつ、どのように行われますか？

変更前の住所と変更後の住所に対して、別々のIDを発行しています。変更前と変更後の住所が同じ建物を指すということが分かれば、IDの統合を行います。建て替えや取り壊しについても同様です。

<aside>
住所変更への対応には、次のような新旧住所の対応データが必要だが、入手できていない。

- 行政が行う街区整備などに伴う住所変更に関する詳しい情報
- 建物の建て替えなどによる住所変更の情報を、入手し確認

</aside>

## データが本物かどうかの判定、真偽性のエビデンスはどうするのか？信頼性の担保は？

GeoTechnologies 社のジオコーダがデータとして持っている場合には本物と判定します。GT 社のデータにはないが、正規化後の形が正しい住所にも ID を発行しています。

現在は、ジオコーディングレベルを見て、そのステータス（信頼性の程度）を確認できます。今後、 `addressPending` というステータスをつけてレスポンスするように変更します。

<aside>
正規化エンジンとジオコーダーは、マッチしたレベルの情報を返す。APIのレスポンスにも含まれる

- `normalization_level`: 都道府県、市区町村、町丁目のどこまでリストにマッチして正規化できたか
- `geocoding_level`: 上記に加えて街区（番）、建物番号（号）のどこまで座標を含む情報とマッチしたか(ジオコーダは有料プランのみ)

意図: ID をできるだけ多く発行し、ユニークで変わらない値があれば十分なユースケースにも対応。GT 社が担保できる信頼性の基準に頼りつつ、`addressPending` ステータスのついたデータの整備に信頼性を追加できる仕組みを準備する。
</aside>

## 履歴はどのように管理され、API として情報共有が行われますか？ （住所が変更されても追えるのか？）

統合された場合は新しい ID のみを返します。更新された場合も最新の情報を返します。削除された ID は実績がなく、レスポンスを検討中です。

<aside>
API のレスポンスについては、<a href="https://geolonia.github.io/prop-id-api/api-specs.html">不動産共通 ID 仕様</a>に。（不動産共通 ID API ユーザー用の管理画面からもリンクされている）ユースケースを見たり、提案をいただきながら決めていきたい部分です。
</aside>

## 逆引き（ID 参照 API）では、最新のデータだけが返るのか、ID の変更・統合・廃止の履歴などの情報も返るのか?

**現在は**、最新のデータを返します。統合、更新の経緯については、どのように返すべきなのかを検討します。

<aside>
API のレスポンスについては、<a href="https://geolonia.github.io/prop-id-api/api-specs.html">不動産共通 ID 仕様</a>に。（不動産共通 ID API ユーザー用の管理画面からもリンクされている）ユースケースを見たり、
</aside>

## 全国の何割をカバーしていますか？

都市部の住居表示住所の場合は 95% 以上、郊外の地番住所しかない場所だと4割以下。
リクエストされた住所の特質（地番 / 住居表示、都市部 / 郊外、古い / 新しい）によって、得意不得意が激しいです。

<aside>

- 得意: 住居表示住所、流通している住所
- 不得手: 地番住所、新築の建物の住所、古くてデータになっていない住所
</aside>

## 更地、山林、農地なども ID が返りますか？ 土地や駐車場などの建物がないものも有料プランならジオコーディングできますか？

更地、山林、農地、駐車場は地番住所（土地の住所）です。
住所の正規化、ジオコーディングができれば ID と座標を返します。住所の正規化が成功し、ジオコーディングができない場合には `addressPending` ステータス付きの ID を返します。

<aside>

- 得意: 住居表示住所、流通している住所
- 不得手: 地番住所、新築の建物の住所、古くてデータになっていない住所
</aside>

## 地番の分筆、合筆時に ID はどうなりますか？

現在は、住所変更への対応と同じです。別々のIDが発行され、分かれたこと、統合されたことが確認できれば統合を行います。が、地番への対応は難しく、大きな課題になっています。

<aside>

- 得意: 住居表示住所、流通している住所
- 不得手: 地番住所、新築の建物の住所、古くてデータになっていない住所
</aside>

## 土地と建物は別の不動産ですが、どのような ID になりますか？

別々の住所として処理されます。ID も別の ID が発行されます。
土地と建物が重なっている場合の紐付けなどの対応方法は検討中です。

<aside>
<figure>
<img width="340" src="./images/api-faq-chiban-vs-residual.jpeg" alt="" />
<figcaption>
<ul>
<li>東京都新宿区西五軒町34番30(地名・地番)</li>
<li>西五軒町12番10(住居表示)</li>
</figcaption>
</figure>

Geolonia エンジニアが見つけた建築計画のお知らせ看板
住所に注目すると、文字列の形だけでは地番 / 住居表示を見分けることができない例。
</aside>

## 建物共通 ID と考えてもいいですか？

現在の進捗状況では、「地番住所も一定サポートできる住居表示住所 & 建物 ID」と言えるかもしれません。
国、自治体の情報公開が進んだり、データの質と量が上がることで「不動産共通 ID」（地番、住居表示、建物に対応）に進化し、その後、農地等の別の問題をはらむ問題にも対処できるかもしれません。

## 不動産会社が管理しているようなデータであれば精度は上がるのか?

ビジネスで管理、更新を施されたデータのほうが、ID を 高い割合で発行できる傾向があります。

<aside>

高い割合 (*) でIDを返す傾向が出る場合

- 壊れた住所文字列（途中で切れている、仮データ、入力ミス、OCR ミスなど）が少ない
- 広告文字列など、住所や建物名ではない文字列がない
- 住所と建物名が分離されている

<small>\* 「割合」は、「ユーザーの持つ住所が入力された場合にAPIがIDを発行できる割合」の意。</small>
</aside>
